/*! mojo - 0.2.0 - Bernard McManus - es6-transpiler - ge31b78 - 2014-10-27 */
define("event",["static/shared","exports"],function(a,b){"use strict";function c(a,b){var c=this;c.target=a,c.type=b,c[l]=a,c[m]=!1,c[n]=!1,c.timeStamp=f.now()}function d(a){return k.test(a)}function e(a){return a.replace(k,"")}var f=a.$Date,g=a.$_keys,h=a.$_create,i=a.$_forEach,j=a.$_PROTO,k=/^\${2}/,l="currentTarget",m="cancelBubble",n="defaultPrevented";b["default"]=c,b.Event=c,c[j]={preventDefault:function(){this[n]=!0},stopPropagation:function(){this[m]=!0}},c.clone=function(a,b){var c=g(a),d=h(a);return i(c,function(b){d[b]=a[b]}),d[l]=b,d},b.isPrivate=d,b.getPublic=e}),define("eventHandler",["static/shared","exports"],function(a,b){"use strict";var c=a.$_slice,d=a.$_ensureArray;b["default"]=function(a,b,e){var f=this;f.func=a,f.locked=!1,f.before=function(){},f.after=function(){},e=d(e),f.invoke=function(g,h){if(!g.cancelBubble){var i=c(e).concat(d(h));i.unshift(g),f.before(g,a),a.apply(b,i),f.after(g,a)}}}}),define("main",["exports"],function(a){"use strict";a["default"]=function(a){var b=this;b.__init(b,a||{})}}),define("proto",["main","event","when","static/construct","static/shared","exports"],function(a,b,c,d,e,f){"use strict";function g(){var a=m(k);return a.__init=function(a,b){for(var c in b)a[c]=b[c];l(a)},a[w]=function(){var a=this,b=q(arguments),c=r(b),d=r(b),e=s(b),f=j(c.type)!==d;f&&a.$emit(j(c.type),e),c.type!==v.$emit||i(d)||t(a.watchers,function(a){a.$emit.apply(a,e)}),c.type===v.$emit&&i(d)&&a.$emit(j(d),e[1])},a.$set=function(a,b){var c=this;return c[a]=b,c.$emit(v.$set,[a,[a]]),c},a.$unset=function(a){var b=this;return n(b,a),b.$emit(v.$unset,[a,[a]]),b},a.$watch=function(a){var b=this;if(!o(a,h))throw new $Error("parent must be a MOJO");var c=a.watchers,d=p(c,b);return 0>d&&(c.push(b),b.$once(v.$deref,function(){d>=0&&c.splice(d,1)})),b},a.$deref=function(){var a=this;a.$emit(v.$deref)},a.$enq=function(a){var b=this;b.__stack.push(a)},a.$digest=function(){var a=this,b=a.__stack;if(!a.__inprog){for(a.__inprog=!0;u(b)>0;)r(b)();a.__inprog=!1}},a}var h=a["default"],i=b.isPrivate,j=b.getPublic,k=c["default"],l=d["default"],m=e.$_create,n=e.$_delete,o=e.$_is,p=e.$_indexOf,q=e.$_slice,r=e.$_shift,s=e.$_pop,t=e.$_forEach,u=e.$_length,v=e.$_EVT,w=e.__$_HANDLE_MOJO;f["default"]=g()}),define("static/aggregate",["main","event","static/shared","exports"],function(a,b,c,d){"use strict";var e=a["default"],f=b.isPrivate,g=c.$Error,h=c.$_forEach,i=c.$_keys,j=c.$_EVT;d["default"]=function(a){var b=new e;return h(a,function(a){h(i(j),function(c){b.$when(j[c],function(b,d,e){if(f(d))throw new g("private events cannot be aggregated");a[c].apply(a,e)})})}),b}}),define("static/construct",["static/shared","exports"],function(a,b){"use strict";var c=a.$_defineProperty,d=a.$_keys,e=a.$_ensureFunc,f=a.$_forEach,g=a.$_EVT,h=a.$_HANDLE_MOJO,i=a.__$_HANDLE_MOJO;b["default"]=function(a){var b=!1;c(a,"__stack",{value:[]}),c(a,"__inprog",{get:function(){return b},set:function(a){b=a}}),c(a,"__events",{get:function(){return d(a.handlers)}}),c(a,"handlers",{value:{}}),c(a,"watchers",{value:[]}),c(a,h,{value:e(a[h]).bind(a)}),c(a,i,{value:a[i].bind(a)}),f(d(g),function(b){var c=g[b],d=a.__add(c,a[i],a);d.locked=!0})}}),define("static/create",["proto","static/shared","exports"],function(a,b,c){"use strict";var d=a["default"],e=b.$_create;c["default"]=function(a){var b=e(d);for(var c in a)b[c]=a[c];return b}}),define("static/shared",["exports"],function(a){"use strict";function b(a){return a.length}function c(a,b){return a.indexOf(b)}function d(a){return t.isArray(a)}function e(a){return d(a)?a:a!==A?[a]:[]}function f(a,b){return e(a).forEach(b)}function g(a){return u.create(a)}function h(a,b,c){u.defineProperty(a,b,c)}function i(a,b){delete a[b]}function j(a){return u.keys(a)}function k(a){return t[x].shift.call(a)}function l(a){return t[x].pop.call(a)}function m(a,b,c){return t[x].slice.call(a,b,c)}function n(a){return a[b(a)-1]}function o(a,b){return"string"==typeof b?typeof a===b:a instanceof b}function p(a,b){return a.hasOwnProperty(b)}function q(a){return a||function(){}}function r(a){return(a||{})[y]?a[y]:a}function s(a,b){return a===b?null:a}var t=Array;a.$Array=t;var u=Object;a.$Object=u;var v=Date;a.$Date=v;var w=Error;a.$Error=w;var x="prototype";a.$_PROTO=x;var y="handleMOJO";a.$_HANDLE_MOJO=y;var z="__"+y;a.__$_HANDLE_MOJO=z;var A;a.$_UNDEFINED=A;var B={$set:"$$set",$unset:"$$unset",$when:"$$listener.added",$emit:"$$listener.triggered",$dispel:"$$listener.removed",$deref:"$$deref"};a.$_EVT=B,a.$_length=b,a.$_indexOf=c,a.$_isArray=d,a.$_ensureArray=e,a.$_forEach=f,a.$_create=g,a.$_defineProperty=h,a.$_delete=i,a.$_keys=j,a.$_shift=k,a.$_pop=l,a.$_slice=m,a.$_last=n,a.$_is=o,a.$_has=p,a.$_ensureFunc=q,a.$_getHandlerFunc=r,a.$_getHandlerContext=s}),define("when",["main","eventHandler","event","static/shared","exports"],function(a,b,c,d,e){"use strict";function f(a,b){return r(a).map(function(a){return a.func}).indexOf(b)}function g(a){for(var b,c=m(y),d=0;d<n(c);d++)if(b=y[c[d]],b===a||l(b)===a)return!0}var h=a["default"],i=b["default"],j=c.Event,k=c.isPrivate,l=c.getPublic,m=d.$_keys,n=d.$_length,o=d.$_shift,p=d.$_pop,q=d.$_last,r=d.$_ensureArray,s=d.$_forEach,t=d.$_is,u=d.$_delete,v=d.$_ensureFunc,w=d.$_getHandlerFunc,x=d.$_getHandlerContext,y=d.$_EVT;e["default"]={$once:function(){var a=this;return a.__when(arguments,function(b){b.before=function(b,c){a.$enq(function(){a.__remove(b.type,c)}),a.$digest()}}),a.$digest(),a},$when:function(){var a=this;return a.__when(arguments),a.$digest(),a},$emit:function(a,b,c){var d=this;return d.$enq(function(){a=a||d.__events,s(a,function(a){var e=d.__get(a),f=c?j.clone(c,d):new j(d,a);s(e,function(a){a.invoke(f,b)}),g(a)||d.$emit(y.$emit,[a,[a,b,f]])})}),d.$digest(),d},$dispel:function(a,b,c){var d=this,e=w(b);return d.$enq(function(){a=a||d.__events,s(a,function(a){(c||!k(a))&&d.__remove(a,e,!!c)})}),d.$digest(),d},__when:function(a,b){b=v(b);var c=this,d=o(a),e=t(q(a),"function")||t(q(a),h)?p(a):c,f=a[0],g=w(e),i=x(e,g);c.$enq(function(){s(d,function(a){b(c.__add(a,g,i,f))})})},__get:function(a){var b=this,c=b.handlers;return a?r(c[a]):c},__add:function(a,b,c,d){var e=this,f=new i(b,c,d),h=e.__get(a);return h.push(f),e.handlers[a]=h,g(a)||e.$emit(y.$when,[a,[a,d,b]]),f},__remove:function(a,b,c){for(var d,e=this,h=e.__get(),i=e.__get(a),j=0;j<n(i);)d=b?f(i,b):j,d>=0&&!i[j].locked&&(i.splice(d,1),j--),j++;n(i)?h[a]=i:u(h,a),g(a)||e.$emit(y.$dispel,[a,[a,b,c]])}}});