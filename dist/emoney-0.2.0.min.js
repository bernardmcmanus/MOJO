/*! emoney - 0.2.0 - Bernard McManus - regression - g9b7dc1 - 2014-12-18 */
(function(){"use strict";function a(a){return a.length}function b(a,b){return a.indexOf(b)}function c(a){return A.isArray(a)}function d(a){return c(a)?a:a!==z?[a]:[]}function e(a,b){return d(a).forEach(b)}function f(a){return B.create(a)}function g(a,b,c){B.defineProperty(a,b,c)}function h(a,b){delete a[b]}function i(a){return B.keys(a)}function j(a){return A[D].shift.call(a)}function k(a){return A[D].pop.call(a)}function l(a,b,c){return A[D].slice.call(a,b||0,c)}function m(b){return b[a(b)-1]}function n(a,b){return"string"==typeof b?typeof a==b:a instanceof b}function o(a,b){return a.hasOwnProperty(b)}function p(a){return n(a,"function")?a:function(){}}function q(a){var b={};for(var c in a)g(b,c,{value:a[c]});return b}function r(a){return(a||{}).handleE$?a.handleE$:a}function s(a,b){return a===b?null:a}function t(a){var b=this;return n(b,t)?void b.__init(b,a||{}):new t(a)}function u(a,b,c){var e=this;e.func=a,e.context=b,e.before=function(){},e.after=function(){},e.bindArgs=d(c)}function v(a,b){var c=this;c.target=a,c.type=b,c[I]=!1,c[J]=!1,c.timeStamp=C.now()}function w(a){return b(F,a)>=0}function x(a,c){var e=d(a).map(function(a){return a.func});return b(e,c)}function y(){var b=f(L);return b.__init=function(a,b){for(var c in b)a[c]=b[c];M(a)},b.$set=function(a,b){var c=this;return c[a]=b,c.$emit(E.$set,[a,[a]]),c},b.$unset=function(a){var b=this;return h(b,a),b.$emit(E.$unset,[a,[a]]),b},b.$enq=function(a){var b=this;b.__stack.push(a)},b.$flush=function(){var b=this,c=b.__stack;if(!b.__inprog){for(b.__inprog=!0;a(c);)j(c)();b.__inprog=!1}},b}var z,A=Array,B=Object,C=Date,D=(Error,"prototype"),E={$set:"$set",$unset:"$unset",$when:"$when",$emit:"$emit",$dispel:"$dispel",$deref:"$deref"},F=i(E).map(function(a){return E[a]}),G=t,H=u;u[D]={invoke:function(a,b){var c=this;if(!a.cancelBubble){var e=c.func,f=l(c.bindArgs).concat(d(b));f.unshift(a),c.before(a,e),e.apply(c.context,f),a.defaultPrevented||c.after(a,e)}}};var I="cancelBubble",J="defaultPrevented";v[D]={preventDefault:function(){this[J]=!0},stopPropagation:function(){this[I]=!0}};var K=function(a){return a&&n(a,"object")&&"handleE$"in a},L={$once:function(){var a=this;return a._$when(arguments,function(b){b.before=function(b,c){a.$enq(function(){a.__remove(b.type,c,!0)}),a.$flush()}}),a.$flush(),a},$when:function(){var a=this;return a._$when(arguments),a.$flush(),a},$emit:function(){var a=this,b=a.__parse(E.$emit,arguments);return a.$enq(function(){e(b[0],function(c){a.__invoke(c,b[1],b[2])})}),a.$flush(),a},$dispel:function(){var a=this,b=a.__parse(E.$dispel,arguments),c=r(b[2]);return a.$enq(function(){e(b[0],function(d){a.__remove(d,c,!!b[1])})}),a.$flush(),a},_$when:function(a,b){b=p(b);var c=this,d=c.__parse(E.$when,a),f=r(d[2]),g=s(d[2],f);c.$enq(function(){e(d[0],function(a){var e=c.__add(a,f,g,d[1]);b(e)})})},__parse:function(a,b){var c=this,d=[];return b=l(b),e([0,1,2],function(e){e?2>e?(d[2]=n(m(b),"function")||K(m(b))?k(b):null,d[2]=a!=E.$dispel?d[2]||c:d[2]):d[1]=b[0]:d[0]=j(b)||c.__events}),d},__pvt:function(a,b,c){var d=this;o(d.__get(),b)&&a!=b&&d.$emit(b,c)},__invoke:function(a,b,c){var d=this,f=d.__get(a),g=new v(d,a);e(f,function(a){a.after=p(c),a.invoke(g,b)}),d.__pvt(a,E.$emit,[a,[a,b]])},__get:function(a){var b=this,c=b.handlers;return a?d(c[a]):c},__add:function(a,b,c,d){var e=this,f=new H(b,c,d),g=e.__get(a);return f.locked=w(a),g.push(f),e.handlers[a]=g,e.__pvt(a,E.$when,[a,[a,d,b]]),f},__remove:function(b,c,d){for(var e,f=this,g=f.__get(),i=f.__get(b),j=0;j<a(i);)e=c?x(i,c):j,e>=0&&(d||!i[j].locked)&&(i.splice(e,1),j--),j++;a(i)?g[b]=i:h(g,b),f.__pvt(b,E.$dispel,[b,[b,c,d]])}},M=function(a){g(a,"__stack",{value:[]}),g(a,"__inprog",{value:!1,writable:!0}),g(a,"__events",{get:function(){return i(a.handlers)}}),g(a,"handlers",{value:{}}),g(a,"handleE$",{value:p(a.handleE$).bind(a)})},N=y(),O=function(a){var b=q(f(N));for(var c in a)b[c]=a[c];return b};G[D]=q(N),G.isE$=K,G.create=O,G.construct=M;var P=G;"function"==typeof define&&define.amd?define([],function(){return P}):"object"==typeof exports?module.exports=P:this.E$=P}).call(this);